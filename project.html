<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sketch2Story | Storyboard</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="page">
    <a class="back-arrow" href="index.html" aria-label="Back to projects">&larr;</a>
    <header class="topbar">
      <div>
        <p class="eyebrow">Sketch2Story</p>
        <h1 id="projectTitle" contenteditable="true" aria-label="Edit project title">Storyboard</h1>
        <p class="lede">Add panels, draw directly inside them, and keep shots in order.</p>
      </div>
    </header>

    <div class="tab-bar" role="tablist" aria-label="Project sections">
      <button class="tab" type="button" role="tab" aria-selected="false" data-tab="panels">Panels</button>
      <button class="tab" type="button" role="tab" aria-selected="false" data-tab="scenes">Scenes</button>
      <button class="tab" type="button" role="tab" aria-selected="false" data-tab="production">Production</button>
      <button class="tab" type="button" role="tab" aria-selected="false" data-tab="export">Export</button>
    </div>

    <div class="tab-panels">
      <div class="tab-panel" data-tab-panel="panels" role="tabpanel" aria-hidden="true">
        <section class="panel-controls">
          <form id="panelForm" class="panel-form">
            <div class="actions-row">
              <div class="actions">
                <button type="submit" class="primary">Add panel</button>
                <button type="button" class="secondary" id="uploadTrigger">Upload image</button>
                <input type="file" id="uploadInput" accept="image/*" hidden>
              </div>
              <div class="actions-right">
                <div class="aspect-toggle" role="group" aria-label="Panel aspect ratio">
                  <label>
                    <input type="radio" name="aspectRatio" value="16:9" checked>
                    <span>16:9</span>
                  </label>
                  <label>
                    <input type="radio" name="aspectRatio" value="9:16">
                    <span>9:16</span>
                  </label>
                </div>
              </div>
            </div>
          </form>
        </section>

        <section class="timeline">
          <div id="panels" class="panel-list empty-state">
            <p class="empty-copy">No panels yet. Add one to start sketching.</p>
          </div>
        </section>
      </div>

      <div class="tab-panel" data-tab-panel="export" role="tabpanel" aria-hidden="true">
        <section class="panel-controls export-controls">
          <div class="actions">
            <button type="button" class="primary" id="exportVideoBtn">Export to video</button>
          </div>
        </section>
        <section class="timeline">
          <div id="exportOutput" class="export-output empty-state">
            <p class="empty-copy">No export yet. Click "Export to video" to render.</p>
          </div>
        </section>
      </div>

      <div class="tab-panel" data-tab-panel="scenes" role="tabpanel" aria-hidden="true">
        <section class="panel-controls scene-controls">
          <div class="scene-bar">
            <button type="button" class="primary" id="sceneModalTrigger">Add scene</button>
          </div>
        </section>

        <section class="timeline">
          <div id="scenesList" class="scene-list empty-state">
            <p class="empty-copy">No scenes yet. Add one to outline your story.</p>
          </div>
        </section>
      </div>

      <div class="tab-panel" data-tab-panel="production" role="tabpanel" aria-hidden="true">
        <section class="panel-controls production-controls">
          <div class="actions">
            <button type="button" class="primary" id="productionBtn">Refresh</button>
          </div>
        </section>
        <section class="timeline">
          <div class="timeline-head">
            <h2>Shopping List</h2>
          </div>
          <div class="production-wrapper">
            <div id="productionOutput" class="export-output empty-state">
              <p class="empty-copy">Click "Refresh" to load production details.</p>
            </div>
          </div>
        </section>

        <section class="timeline">
          <div class="timeline-head">
            <h2>Characters</h2>
          </div>
          <div class="production-wrapper">
            <div id="charactersOutput" class="export-output empty-state">
              <p class="empty-copy">Click "Refresh" to load characters.</p>
            </div>
          </div>
        </section>

        <section class="timeline">
          <div class="timeline-head">
            <h2>Scenes</h2>
          </div>
          <div id="scenesBreakdown" class="scenes-breakdown empty-state">
            <p class="empty-copy">No scenes or panels yet.</p>
          </div>
        </section>
      </div>
    </div>
  </div>

  <div class="modal" data-modal>
    <div class="modal__dialog">
      <h3>Convert to Image</h3>
      <p class="modal__lede">
        Your sketch defines the layout and composition of the shot, but it doesn't specify visual details such as character appearance, clothing, lighting, or setting. To generate an accurate storyboard panel, please add a few descriptive details below.
      </p>
      <textarea class="modal__textarea" data-prompt-input placeholder="Describe characters, lighting, setting, mood, camera intent"></textarea>
      <div class="modal__actions">
        <button type="button" class="secondary" data-modal-cancel>Cancel</button>
        <button type="button" class="primary" data-modal-submit>Generate</button>
      </div>
    </div>
  </div>

  <div class="modal" data-edit-modal>
    <div class="modal__dialog">
      <h3>Edit image</h3>
      <p class="modal__lede">
        Describe the changes to apply to this frame. The current image will be used as a reference.
      </p>
      <textarea class="modal__textarea" data-edit-input placeholder="Describe edits to apply"></textarea>
      <div class="modal__actions">
        <button type="button" class="secondary" data-edit-cancel>Cancel</button>
        <button type="button" class="primary" data-edit-submit>Apply edits</button>
      </div>
    </div>
  </div>

  <div class="modal" data-clarification-modal>
    <div class="modal__dialog">
      <h3>We need clarification</h3>
      <p class="modal__lede">
        Your sketch has some ambiguous elements. Please provide more details to help us generate the right image.
      </p>
      <textarea class="modal__textarea" data-clarification-input placeholder="Describe what you want in more detail..."></textarea>
      <div class="modal__actions">
        <button type="button" class="secondary" data-clarification-cancel>Cancel</button>
        <button type="button" class="primary" data-clarification-submit>Continue</button>
      </div>
    </div>
  </div>

  <div class="modal" data-scene-modal>
    <div class="modal__dialog">
      <h3>Add scene</h3>
      <form id="sceneForm" class="scene-form">
        <div class="scene-form-grid">
          <label class="field">
            <span>Scene title</span>
            <input id="sceneTitle" type="text" placeholder="Enter scene title" autocomplete="off">
          </label>
          <label class="field">
            <span>Description</span>
            <textarea id="sceneDescription" rows="4" placeholder="Briefly describe the scene"></textarea>
          </label>
        </div>
        <div class="modal__actions">
          <button type="button" class="secondary" data-scene-cancel>Cancel</button>
          <button type="submit" class="primary" data-scene-save>Add scene</button>
        </div>
      </form>
    </div>
  </div>

  <div class="modal" data-tutorial-modal>
    <div class="modal__dialog">
      <div>
        <h3>Welcome to Sketch2Story</h3>
        <p class="modal__lede">
          Would you like a quick tutorial on how to use this project?
        </p>
      </div>
      <div style="display: flex; align-items: center; gap: 10px; justify-content: flex-end;">
        <input type="checkbox" id="tutorialNeverCheckbox" data-tutorial-never style="width: 18px; height: 18px; cursor: pointer; accent-color: var(--accent); margin: 0; flex-shrink: 0;">
        <label for="tutorialNeverCheckbox" style="margin: 0; font-size: 14px; color: var(--muted); white-space: nowrap; cursor: pointer; margin-left: -4px;">Don't show this again</label>
        <button type="button" class="secondary" data-tutorial-skip>Skip for now</button>
        <button type="button" class="primary" data-tutorial-start>Start tutorial</button>
      </div>
    </div>
  </div>

  <div class="modal" data-tutorial-steps-modal>
    <div class="modal__dialog tutorial-steps-dialog">
      <div class="tutorial-step" data-step="0" style="display: none;">
        <h3>Step 1: Create a Scene</h3>
        <p class="modal__lede">Scenes help you organize your storyboard. Create your first scene in the Scenes tab.</p>
        <img src="tutorial/scene.gif" alt="Create a Scene" style="width: 100%; border-radius: 8px; margin: 16px 0;">
      </div>
      <div class="tutorial-step" data-step="1" style="display: none;">
        <h3>Step 2: Draw in a Panel</h3>
        <p class="modal__lede">Click "Add panel" to create a new panel, and draw your storyboard frames directly in the canvas.</p>
        <div style="overflow: hidden; border-radius: 8px; margin: 16px 0;">
          <img src="tutorial/draw.gif" alt="Draw in a Panel" style="width: 100%; display: block; margin-top: -4px;">
        </div>
      </div>
      <div class="tutorial-step" data-step="2" style="display: none;">
        <h3>Step 3: Enhance with Sparkles</h3>
        <p class="modal__lede">Click the sparkles button to enhance your panel using AI.</p>
        <img src="tutorial/enhance.gif" alt="Enhance with AI" style="width: 100%; height: 360px; object-fit: contain; border-radius: 8px; margin: 16px 0;">
      </div>
      <div class="tutorial-step" data-step="3" style="display: none;">
        <h3>Step 4: Edit with AI</h3>
        <p class="modal__lede">Edit your image by saying what you want to change or enhance.</p>
        <img src="tutorial/edit.gif" alt="Edit with AI" style="width: 100%; height: 360px; object-fit: contain; border-radius: 8px; margin: 16px 0;">
      </div>
      <div class="tutorial-step" data-step="4" style="display: none;">
        <h3>Step 5: Generate In-Between Frames</h3>
        <p class="modal__lede">Click the "+" button between panels to auto-generate smooth transitions between your frames.</p>
        <img src="tutorial/in-between.gif" alt="Generate In-Between Frames" style="width: 100%; border-radius: 8px; margin: 16px 0;">
      </div>
      <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 16px; gap: 12px;">
        <span id="tutorialProgress" style="font-size: 13px; color: var(--muted);">Step 1 of 5</span>
        <div style="display: flex; gap: 10px;">
          <button type="button" class="secondary" id="tutorialPrev" style="display: none;">Previous</button>
          <button type="button" class="primary" id="tutorialNext">Next</button>
          <button type="button" class="secondary" id="tutorialDone" style="display: none;">Done</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
